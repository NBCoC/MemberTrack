<template>
  <require from="../view-models/member-dialog.view-model"></require>
  <!--Dialogs-->
  <mt-member-dialog view-model.ref="memberDialogVm" dismiss.delegate="dismissMemberDialog($event)"></mt-member-dialog>
  <!--Content-->
  <section>
    <mt-report data.bind="report"></mt-report>

    <div class="mdl-grid demo-content">
      <table mt-mdl="data-table" class="mdl-shadow--2dp mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone"
        show.two-way="recentMembers.length">
        <thead>
          <tr>
            <th class="recent-members">Recent Members</th>
          </tr>
        </thead>
        <tbody>
          <tr repeat.for="person of recentMembers | sort : 'lastModifiedDate'">
            <td>
              <a href="#main/member-details/${person.id}" class="recent-item-link">
                <span>${person.name}</span>
                <br>
                <span class="recent-item-date">Last Modified on ${person.lastModifiedDate | dateFormat : 'MMMM Do YYYY, h:mm:ss a'}</span>
              </a>
            </td>
          </tr>
        </tbody>
      </table>

      <table mt-mdl="data-table" class="mdl-shadow--2dp mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone"
        show.two-way="recentVisitors.length">
        <thead>
          <tr>
            <th class="recent-visitors">Recent Visitors</th>
          </tr>
        </thead>
        <tbody>
          <tr repeat.for="person of recentVisitors | sort : 'lastModifiedDate'">
            <td>
              <a href="#main/member-details/${person.id}" class="recent-item-link">
                <span>${person.name}</span>
                <br>
                <span class="recent-item-date">Last Modified on ${person.lastModifiedDate | dateFormat : 'MMMM Do YYYY, h:mm:ss a'}</span>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <button mt-mdl="button" type="button" class="mdl-button--raised mdl-js-ripple-effect mdl-button--primary add-btn"
      click.trigger="displayMemberDialog()" if.bind="isEditor">
      New Member / Visitor
      </button>
  </section>
</template>
